# Как начать работать с {{ speechsense-full-name }}

Сервис {{ speechsense-full-name }} позволяет анализировать каналы коммуникации вашего бизнеса на основе записей разговоров и интегрируется с вашими АТС и CRM-системами. {{ speechsense-name }} использует голосовые технологии {{ speechkit-full-name }} для расшифровки и статистического и качественного анализа диалога.

Вы можете загрузить в {{ speechsense-name }} свои аудиозаписи или воспользоваться [демонстрационным примером](https://storage.yandexcloud.net/doc-files/speechsense-demo-dialog.wav), который был синтезирован с помощью {{ speechkit-name }}.

## Перед началом работы {#before-you-begin}

1. Перейдите в [консоль управления]({{ link-console-main }}), затем войдите в {{ yandex-cloud }} или зарегистрируйтесь, если вы еще не зарегистрированы. О том, как начать работать с {{ yandex-cloud }}, см. в документе [Начало работы с {{ yandex-cloud }}](../getting-started/).
1. Примите пользовательское соглашение.
1. На странице [**Биллинг**]({{ link-console-billing }}) убедитесь, что у вас подключен [платежный аккаунт](../billing/concepts/billing-account.md) и он находится в статусе `ACTIVE` или `TRIAL_ACTIVE`. Если платежного аккаунта нет, [создайте его](../billing/quickstart/index.md#create_billing_account).
1. [Убедитесь](../iam/operations/roles/get-assigned-roles.md), что вашему аккаунту назначена роль `speech-sense.spaces.creator`.
1. Откройте [главную страницу]({{ link-speechsense-main }}) {{ speechsense-name }}.
1. Выберите организацию, в которой вы будете работать с {{ speechsense-name }}, или [создайте](../organization/operations/enable-org.md) новую.

## Настройте окружение {#set-space}

1. Создайте [пространство](concepts/resources-hierarchy.md#space), в котором будут находиться все ваши [проекты](concepts/resources-hierarchy.md#project): выберите **Создать пространство**, введите название, (опционально) добавьте описание и нажмите кнопку **Создать**.
1. К пространству привяжите платежный аккаунт, с которого будет оплачиваться использование {{ speechsense-name }}.

   {% note tip %}

   Управлять платежным аккаунтом могут только пользователи с [аккаунтом на Яндексе](../iam/concepts/index.md#passport). Если вы работаете с {{ yandex-cloud }} через [федерацию удостоверений](../organization/concepts/add-federation.md), [обратитесь]({{ link-console-support }}) в техническую поддержку.

   {% endnote %}

1. Перейдите на вкладку **Подключения** и создайте [подключение](concepts/resources-hierarchy.md#connection) на основе метаинформации ваших аудиоданных:

   1. Введите **Название подключения**.
   1. Выберите **Тип данных** — **Двухканальное аудио**.
   1. Задайте параметры подключения на основе метаинформации ваших аудиозаписей:
      * В разделе **Оператор** укажите номер дорожки в аудиозаписях, в которой записан голос оператора, определите отображаемое имя (по умолчанию `Оператор`).
      * В разделе **Клиент** укажите номер дорожки в аудиозаписях, в которой записан голос клиента, определите отображаемое имя (по умолчанию `Клиент`).
      * В разделе **Общие метаданные** при необходимости измените отображаемые в системе названия параметров. 
      * Если ваши метаданные хранят дополнительную информацию, которую вы хотите сохранять и анализировать, добавьте их в соответствующий раздел. Укажите ключ параметра (он должен совпадать с ключом в файле метаданных), укажите тип и отображаемое в системе название. В качестве дополнительных параметров поддерживаются типы `Дата`, `Строка`, `Число`, `Логический` и `JSON`.
   1. Нажмите кнопку **Создать подключение**.

   {% cut "Пример metadata.json" %}

   ```json
   {
      "direction_outgoung": "true",
      "client_id": "456",
      "client_name": "Павел Иванов",
      "date": "2023-09-29T09:08:38.958Z",
      "date_to": "2023-09-29T09:15:07.897Z",
      "language": "RU",
      "operator_id": "123",
      "operator_name": "Мария Федорова"
   }
   ```

   {% endcut %}

1. Создайте проект: на странице пространства нажмите кнопку **Создать проект**, введите имя проекта, добавьте в проект подключение. Для каждого подключения вы можете выбрать до двух правил фильтрации на основе метаинформации подключения. Фильтры будут добавлять в проект только нужные диалоги. После добавления всех нужных подключений и настройки фильтров нажмите кнопку **Создать проект**. 

## Загрузите данные {#upload-data}

Для загрузки данных в {{ speechsense-name }} используется [gRPC API](api-ref/grpc/index.md). 

1. [Создайте сервисный аккаунт](../iam/operations/sa/create.md) с ролью `speech-sense.data.editor`. Это позволит сервисному аккаунту загружать данные в созданное подключение. Подробнее о ролях, действующих в сервисе, см. раздел [{#T}](security/index.md).
1. [Добавьте сервисный аккаунт в пространство](operations/space/add-user-to-space.md) с ролью `{{ roles-speechsense-editor }}`.
1. [Создайте API-ключ](../iam/operations/api-key/create.md) или [IAM-токен](../iam/operations/iam-token/create-for-sa.md) для сервисного аккаунта, чтобы аутентифицироваться в API. [Подробнее об аутентификации в API {{ speechsense-name }}](api-ref/authentication.md).
1. [Загрузите данные](operations/data/upload-data.md) с помощью Python-скрипта отправки данных. Вы можете передавать аудио целиком в одном сообщении или аудиофрагментами. 

   {% include [supported-formats](../_includes/speechsense/formats.md) %}
